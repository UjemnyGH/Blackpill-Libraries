#ifndef __PCD_TEXT_
#define __PCD_TEXT_

#include "globals.h"
#include "../additional_libs/string_formatting.h"

const uint8 gFont[97][6] = {
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
    {0x08, 0x08, 0x08, 0x08, 0x00, 0x08},
    {0x14, 0x14, 0x00, 0x00, 0x00, 0x00},
    {0x48, 0xff, 0x24, 0x24, 0xff, 0x12},
    {0x3c, 0x52, 0x1c, 0x30, 0x52, 0x3c},
    {0x42, 0x25, 0x12, 0x48, 0xa4, 0x42},
    {0x18, 0x24, 0x18, 0xa4, 0x64, 0x58},
    {0x08, 0x08, 0x00, 0x00, 0x00, 0x00},
    {0x10, 0x08, 0x04, 0x04, 0x08, 0x10},
    {0x04, 0x08, 0x10, 0x10, 0x08, 0x04},
    {0x08, 0x1c, 0x14, 0x00, 0x00, 0x00},
    {0x00, 0x00, 0x08, 0x1c, 0x08, 0x00},
    {0x00, 0x00, 0x00, 0x00, 0x08, 0x04},
    {0x00, 0x00, 0x00, 0x1c, 0x00, 0x00},
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x04},
    {0x10, 0x10, 0x08, 0x08, 0x04, 0x04},
    {0x18, 0x24, 0x24, 0x24, 0x24, 0x18},
    {0x08, 0x0c, 0x08, 0x08, 0x08, 0x1c},
    {0x18, 0x24, 0x10, 0x08, 0x04, 0x3c},
    {0x18, 0x24, 0x10, 0x20, 0x24, 0x18},
    {0x10, 0x18, 0x14, 0x3c, 0x10, 0x10},
    {0x3c, 0x04, 0x1c, 0x20, 0x20, 0x1c},
    {0x18, 0x24, 0x04, 0x1c, 0x24, 0x18},
    {0x3c, 0x20, 0x10, 0x10, 0x08, 0x08},
    {0x18, 0x24, 0x18, 0x24, 0x24, 0x18},
    {0x18, 0x24, 0x38, 0x20, 0x20, 0x18},
    {0x00, 0x08, 0x00, 0x00, 0x08, 0x00},
    {0x00, 0x08, 0x00, 0x00, 0x08, 0x04},
    {0x60, 0x18, 0x06, 0x06, 0x18, 0x60},
    {0x00, 0x00, 0x1c, 0x00, 0x1c, 0x00},
    {0x06, 0x18, 0x60, 0x60, 0x18, 0x06},
    {0x18, 0x24, 0x20, 0x10, 0x00, 0x10},
    {0x3c, 0x5a, 0x66, 0x66, 0x7a, 0x1c},
    //Letters Upper
    {0x18, 0x24, 0x24, 0x3c, 0x24, 0x24},
    {0x18, 0x24, 0x1c, 0x24, 0x24, 0x1c},
    {0x18, 0x24, 0x04, 0x04, 0x24, 0x18},
    {0x1c, 0x24, 0x24, 0x24, 0x24, 0x1c},
    {0x3c, 0x04, 0x04, 0x1c, 0x04, 0x3c},
    {0x3c, 0x04, 0x04, 0x1c, 0x04, 0x04},
    {0x18, 0x24, 0x04, 0x34, 0x24, 0x18},
    {0x24, 0x24, 0x24, 0x3c, 0x24, 0x24},
    {0x1c, 0x08, 0x08, 0x08, 0x08, 0x1c},
    {0x78, 0x20, 0x20, 0x20, 0x24, 0x18},
    {0x24, 0x24, 0x14, 0x0c, 0x14, 0x24},
    {0x04, 0x04, 0x04, 0x04, 0x04, 0x3c},
    {0x22, 0x36, 0x2a, 0x22, 0x22, 0x22},
    {0x22, 0x26, 0x2a, 0x2a, 0x32, 0x22},
    {0x1c, 0x22, 0x22, 0x22, 0x22, 0x1c},
    {0x0e, 0x12, 0x12, 0x0e, 0x02, 0x02},
    {0x1c, 0x22, 0x22, 0x22, 0x22, 0x7c},
    {0x0e, 0x12, 0x12, 0x0e, 0x0a, 0x12},
    {0x18, 0x24, 0x08, 0x10, 0x24, 0x18},
    {0x3e, 0x08, 0x08, 0x08, 0x08, 0x08},
    {0x22, 0x22, 0x22, 0x22, 0x22, 0x1c},
    {0x22, 0x22, 0x22, 0x14, 0x14, 0x08},
    {0x22, 0x22, 0x22, 0x2a, 0x36, 0x22},
    {0x14, 0x14, 0x14, 0x08, 0x14, 0x14},
    {0x22, 0x22, 0x14, 0x08, 0x08, 0x08},
    {0x3c, 0x20, 0x10, 0x08, 0x04, 0x3c},
    {0x1c, 0x04, 0x04, 0x04, 0x04, 0x1c},
    {0x04, 0x04, 0x08, 0x08, 0x10, 0x10},
    {0x1c, 0x10, 0x10, 0x10, 0x10, 0x1c},
    {0x08, 0x14, 0x00, 0x00, 0x00, 0x00},
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x7e},
    {0x04, 0x08, 0x00, 0x00, 0x00, 0x00}
};

void DrawText(const char* text, uint8 x, uint8 y) {
    int next_line = 0;
    int to_start = 0;

    for(uint16 i = 0; i < GetStrLen(text); i++) {
        if(text[i] == 10) {
            next_line += 8;
            to_start = (i + 1) * 8;
        }

        if(text[i] == '\t') {
            to_start = -2;
        }

        for(uint8 my = 0; my < 6; my++) {
            for(uint8 mx = 0; mx < 8; mx++) {
                if(text[i] != 10) {
                    PCD_SetPixel(&gScreen, x + mx + ((i * 6) - to_start), y + (my + next_line), gFont[ToUpper(text[i])][my] & (0x1 << mx));
                }
            }
        }
    }
}

#endif